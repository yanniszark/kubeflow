GOLANG_VERSION ?= 1.12
GO = GO111MODULE=on go
GO_BUILD_FLAGS = -a -ldflags '-extldflags "-static"' -o bin/$(COMPONENT)

ifeq ($(strip $(CHANGED_FILES)),)
# Changed files is empty; not dirty
# Don't include --dirty because it could be dirty if files outside the ones we care
# about changed.
GIT_VERSION := $(shell git describe --tags --long)
else
GIT_VERSION := $(shell git describe --tags --long)-dirty-$(shell git diff | shasum -a256 | cut -c -6)
endif

COMPONENT ?= $(shell basename $(CURDIR))